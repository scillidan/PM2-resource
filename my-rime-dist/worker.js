(function(){"use strict";function B(n,e){self.onmessage=async a=>{await e;const{name:o,args:i,transferableIndices:p}=a.data,r=[];let s;try{const c=n[o];if(typeof c!="function"){console.error(`${o} is not an exposed worker function`),self.close();return}const t=await c(...i);i.forEach((m,h)=>p.includes(h)&&r.push(m)),s={type:"success",result:t,transferables:r}}catch(c){const{message:t,name:m}=c;s={type:"error",error:{message:t,name:m}}}self.postMessage(s,r)}}function q(n){return(...e)=>{const a={type:"control",name:n,args:e};self.postMessage(a)}}function E(n,e){e=e||{};const{url:a,init:o}=e;return new Promise(i=>{self.Module={onRuntimeInitialized(){o&&o(),i(null)},locateFile(p,r){return(a||r)+p}},importScripts((a||"")+n)})}function S(n,...e){const a=Module.FS[n](...e);if(n!=="mkdir")return a}const P=(n,e)=>e.some(a=>n instanceof a);let w,j;function L(){return w||(w=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function A(){return j||(j=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const k=new WeakMap,d=new WeakMap,x=new WeakMap,u=new WeakMap,y=new WeakMap;function C(n){const e=new Promise((a,o)=>{const i=()=>{n.removeEventListener("success",p),n.removeEventListener("error",r)},p=()=>{a(b(n.result)),i()},r=()=>{o(n.error),i()};n.addEventListener("success",p),n.addEventListener("error",r)});return e.then(a=>{a instanceof IDBCursor&&k.set(a,n)}).catch(()=>{}),y.set(e,n),e}function F(n){if(d.has(n))return;const e=new Promise((a,o)=>{const i=()=>{n.removeEventListener("complete",p),n.removeEventListener("error",r),n.removeEventListener("abort",r)},p=()=>{a(),i()},r=()=>{o(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",p),n.addEventListener("error",r),n.addEventListener("abort",r)});d.set(n,e)}let _={get(n,e,a){if(n instanceof IDBTransaction){if(e==="done")return d.get(n);if(e==="objectStoreNames")return n.objectStoreNames||x.get(n);if(e==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return b(n[e])},set(n,e,a){return n[e]=a,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function O(n){_=n(_)}function T(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...a){const o=n.call(l(this),e,...a);return x.set(o,e.sort?e.sort():[e]),b(o)}:A().includes(n)?function(...e){return n.apply(l(this),e),b(k.get(this))}:function(...e){return b(n.apply(l(this),e))}}function V(n){return typeof n=="function"?T(n):(n instanceof IDBTransaction&&F(n),P(n,L())?new Proxy(n,_):n)}function b(n){if(n instanceof IDBRequest)return C(n);if(u.has(n))return u.get(n);const e=V(n);return e!==n&&(u.set(n,e),y.set(e,n)),e}const l=n=>y.get(n);function N(n,e,{blocked:a,upgrade:o,blocking:i,terminated:p}={}){const r=indexedDB.open(n,e),s=b(r);return o&&r.addEventListener("upgradeneeded",c=>{o(b(r.result),c.oldVersion,c.newVersion,b(r.transaction),c)}),a&&r.addEventListener("blocked",c=>a(c.oldVersion,c.newVersion,c)),s.then(c=>{p&&c.addEventListener("close",()=>p()),i&&c.addEventListener("versionchange",t=>i(t.oldVersion,t.newVersion,t))}).catch(()=>{}),s}const W=["get","getKey","getAll","getAllKeys","count"],H=["put","add","delete","clear"],f=new Map;function z(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(f.get(e))return f.get(e);const a=e.replace(/FromIndex$/,""),o=e!==a,i=H.includes(a);if(!(a in(o?IDBIndex:IDBObjectStore).prototype)||!(i||W.includes(a)))return;const p=async function(r,...s){const c=this.transaction(r,i?"readwrite":"readonly");let t=c.store;return o&&(t=t.index(s.shift())),(await Promise.all([t[a](...s),i&&c.done]))[0]};return f.set(e,p),p}O(n=>({...n,get:(e,a,o)=>z(e,a)||n.get(e,a,o),has:(e,a)=>!!z(e,a)||n.has(e,a)}));const v="hash",g="content";class R{dbPromise;constructor(e){this.dbPromise=N(e,1,{upgrade(a){a.createObjectStore(v),a.createObjectStore(g)}})}async getDB(){return this.dbPromise.catch(()=>{})}async get(e,a,o){const i=await this.getDB();if(await i?.get(v,e)===a)return i.get(g,e);const r=await fetch(o);if(!r.ok)throw new Error(`Fail to download ${e}`);const s=await r.arrayBuffer();return await i?.put(g,s,e),await i?.put(v,a,e),s}}var K="\u6719\u6708\u62FC\u97F3",U="\u6719\u6708\u62FC\u97F3\xB7\u8BED\u53E5\u6D41",X="\u7CA4\u8BED\u62FC\u97F3",G="\u7CA4\u8BED\u62FC\u97F3\xB7IPA",J="\u81EA\u7136\u7801\u53CC\u62FC",Q="\u667A\u80FDABC\u53CC\u62FC",Y="\u5C0F\u9E64\u53CC\u62FC",Z="\u5FAE\u8F6F\u53CC\u62FC",nn="\u62FC\u97F3\u52A0\u52A0\u53CC\u62FC",en="86\u4E94\u7B14",an="86\u4E94\u7B14\xB7\u62FC\u97F3",rn="86\u4E94\u7B14\xB7\u7E41\u4F53",on="\u8896\u73CD\u7B80\u62FC",cn="\u5730\u7403\u62FC\u97F3",pn="X-SAMPA",sn="\u4E91\u9F99\u56FD\u9645\u97F3\u6807",tn="\u6CE8\u97F3",bn="\u6CE8\u97F3\xB7\u5FEB\u6253",mn="\u5BAB\u4FDD\u62FC\u97F3\xB7\u4E03\u6307\u7985",dn="\u5BAB\u4FDD\u62FC\u97F3\xB7\u516B\u6307\u7985",un="\u5BAB\u4FDD\u62FC\u97F3\xB7\u4E5D\u6307\u7985",yn="\u5BAB\u4FDD\u62FC\u97F3\xB7\u5341\u6307\u7985",_n="\u4E2D\u53E4\u5168\u62FC",ln="\u4E2D\u53E4\u4E09\u62FC",fn="\u4ED3\u9889\u4E94\u4EE3",vn="\u4ED3\u9889\u4E94\u4EE3\xB7\u5FEB\u6253",gn="\u4E94\u7B14\u753B",hn="\u884C\u521730",$n="\u4E0A\u6D77\u5434\u8BED\xB7\u8001\u6D3E",wn="\u4E0A\u6D77\u5434\u8BED\xB7\u65B0\u6D3E",jn="\u82CF\u5DDE\u5434\u8BED",kn="\u6253\u5B57\u901F\u8BB0\u6CD5",xn="\u5FEB\u901F\u4ED3\u9889",zn="\u901F\u6210",Mn={luna_pinyin:K,luna_pinyin_fluency:U,jyut6ping3:X,jyut6ping3_ipa:G,double_pinyin:J,double_pinyin_abc:Q,double_pinyin_flypy:Y,double_pinyin_mspy:Z,double_pinyin_pyjj:nn,wubi86:en,wubi_pinyin:an,wubi_trad:rn,pinyin_simp:on,terra_pinyin:cn,ipa_xsampa:pn,ipa_yunlong:sn,bopomofo:tn,bopomofo_express:bn,combo_pinyin:mn,combo_pinyin_8:dn,combo_pinyin_9:un,combo_pinyin_10:yn,zyenpheng:_n,sampheng:ln,cangjie5:fn,cangjie5_express:vn,stroke:gn,array30:hn,wugniu_lopha:$n,wugniu:wn,soutzoe:jn,stenotype:kn,scj6:xn,quick5:zn},Dn={},In={dict:"luna_pinyin"},Bn={dict:"luna_pinyin",prism:"luna_quanpin"},qn={},En={dict:"jyut6ping3",prism:"jyut6ping3_ipa"},Sn={dict:"luna_pinyin",prism:"double_pinyin"},Pn={dict:"luna_pinyin",prism:"double_pinyin_abc"},Ln={dict:"luna_pinyin",prism:"double_pinyin_flypy"},An={dict:"luna_pinyin",prism:"double_pinyin_mspy"},Cn={dict:"luna_pinyin",prism:"double_pinyin_pyjj"},Fn={},On={dict:"wubi86",prism:"wubi_pinyin"},Tn={dict:"wubi86",prism:"wubi_trad"},Vn={},Nn={},Wn={},Hn={},Rn={dict:"terra_pinyin",prism:"bopomofo"},Kn={dict:"terra_pinyin",prism:"bopomofo_express"},Un={dict:"luna_pinyin",prism:"combo_pinyin"},Xn={dict:"luna_pinyin",prism:"combo_pinyin"},Gn={dict:"luna_pinyin",prism:"combo_pinyin"},Jn={dict:"luna_pinyin",prism:"combo_pinyin"},Qn={},Yn={dict:"zyenpheng",prism:"sampheng"},Zn={},ne={dict:"cangjie5",prism:"cangjie5_express"},ee={},ae={},ie={},re={dict:"wugniu_lopha",prism:"wugniu"},oe={},ce={dict:"luna_pinyin",prism:"stenotype"},pe={},se={},te={luna_pinyin:Dn,luna_pinyin_fluency:In,luna_quanpin:Bn,jyut6ping3:qn,jyut6ping3_ipa:En,double_pinyin:Sn,double_pinyin_abc:Pn,double_pinyin_flypy:Ln,double_pinyin_mspy:An,double_pinyin_pyjj:Cn,wubi86:Fn,wubi_pinyin:On,wubi_trad:Tn,pinyin_simp:Vn,terra_pinyin:Nn,ipa_xsampa:Wn,ipa_yunlong:Hn,bopomofo:Rn,bopomofo_express:Kn,combo_pinyin:Un,combo_pinyin_8:Xn,combo_pinyin_9:Gn,combo_pinyin_10:Jn,zyenpheng:Qn,sampheng:Yn,cangjie5:Zn,cangjie5_express:ne,stroke:ee,array30:ae,wugniu_lopha:ie,wugniu:re,soutzoe:oe,stenotype:ce,scj6:pe,quick5:se},be="luna-pinyin",me="luna-pinyin",de="luna-pinyin",ue="cantonese",ye="cantonese",_e="double-pinyin",le="double-pinyin",fe="double-pinyin",ve="double-pinyin",ge="double-pinyin",he="wubi",$e="wubi",we="wubi",je="pinyin-simp",ke="terra-pinyin",xe="ipa",ze="ipa",Me="bopomofo",De="bopomofo",Ie="combo-pinyin",Be="combo-pinyin",qe="combo-pinyin",Ee="combo-pinyin",Se="middle-chinese",Pe="middle-chinese",Le="cangjie",Ae="cangjie",Ce="stroke",Fe="array",Oe="wugniu",Te="wugniu",Ve="soutzoe",Ne="stenotype",We="scj",He="quick",Re={luna_pinyin:be,luna_pinyin_fluency:me,luna_quanpin:de,jyut6ping3:ue,jyut6ping3_ipa:ye,double_pinyin:_e,double_pinyin_abc:le,double_pinyin_flypy:fe,double_pinyin_mspy:ve,double_pinyin_pyjj:ge,wubi86:he,wubi_pinyin:$e,wubi_trad:we,pinyin_simp:je,terra_pinyin:ke,ipa_xsampa:xe,ipa_yunlong:ze,bopomofo:Me,bopomofo_express:De,combo_pinyin:Ie,combo_pinyin_8:Be,combo_pinyin_9:qe,combo_pinyin_10:Ee,zyenpheng:Se,sampheng:Pe,cangjie5:Le,cangjie5_express:Ae,stroke:Ce,array30:Fe,wugniu_lopha:Oe,wugniu:Te,soutzoe:Ve,stenotype:Ne,scj6:We,quick5:He},Ke=["stroke"],Ue=["stroke"],Xe=["luna_pinyin","stroke","cangjie5"],Ge=["luna_pinyin","stroke","cangjie5"],Je=["luna_pinyin"],Qe=["luna_pinyin"],Ye=["luna_pinyin"],Ze=["luna_pinyin"],na=["luna_pinyin"],ea=["pinyin_simp"],aa=["pinyin_simp"],ia=["pinyin_simp"],ra=["stroke"],oa=["stroke"],ca=["terra_pinyin","stroke"],pa=["terra_pinyin","stroke"],sa=["luna_pinyin"],ta=["luna_pinyin"],ba=["luna_pinyin"],ma=["luna_pinyin"],da=["luna_pinyin"],ua=["luna_pinyin"],ya=["luna_quanpin"],_a=["luna_quanpin"],la=["luna_pinyin"],fa=["luna_quanpin"],va=["luna_pinyin"],ga=["luna_pinyin"],ha=["luna_pinyin"],$a=["luna_pinyin"],wa=["luna_quanpin"],ja=["luna_quanpin"],ka={luna_pinyin:Ke,luna_pinyin_fluency:Ue,jyut6ping3:Xe,jyut6ping3_ipa:Ge,double_pinyin:Je,double_pinyin_abc:Qe,double_pinyin_flypy:Ye,double_pinyin_mspy:Ze,double_pinyin_pyjj:na,wubi86:ea,wubi_pinyin:aa,wubi_trad:ia,pinyin_simp:ra,terra_pinyin:oa,bopomofo:ca,bopomofo_express:pa,combo_pinyin:sa,combo_pinyin_8:ta,combo_pinyin_9:ba,combo_pinyin_10:ma,zyenpheng:da,sampheng:ua,cangjie5:ya,cangjie5_express:_a,stroke:la,array30:fa,wugniu_lopha:va,wugniu:ga,soutzoe:ha,stenotype:$a,scj6:wa,quick5:ja},xa=[{name:"jyut6ping3.prism.bin",md5:"6b71a9e2f823ddd4e264a1237914d1a7"},{name:"jyut6ping3.reverse.bin",md5:"7e966b94835ad457d5f81a3338f32f3b"},{name:"jyut6ping3.schema.yaml",md5:"d0fc61e25feffc2526bb4e98e16bbde6"},{name:"jyut6ping3.table.bin",md5:"7691a71f0998565dc2354f41cc3eaa10"},{name:"jyut6ping3_ipa.prism.bin",md5:"7b70d7566b50325e2b10d617207e0d93"},{name:"jyut6ping3_ipa.schema.yaml",md5:"bc1fc01dbaeb836c2e5aa5017ecd8b94"}],za=[{name:"wubi86.prism.bin",md5:"7911f0d74ad5660007ffe1ccb45bc7cc"},{name:"wubi86.reverse.bin",md5:"e509a960ce9217658c2e7b16e790e9b1"},{name:"wubi86.schema.yaml",md5:"4c66187568b199a1a50026a13e1dde4b"},{name:"wubi86.table.bin",md5:"539d2084a08c7b6e93efe04e2cb03468"},{name:"wubi_pinyin.prism.bin",md5:"10ff5d4615957cef77fbf4c70037bf27"},{name:"wubi_pinyin.schema.yaml",md5:"4c04a659b6eb7371b3c2ec2607a19671"},{name:"wubi_trad.prism.bin",md5:"9f96db6b44aa816e9226c4becb6c4fdd"},{name:"wubi_trad.schema.yaml",md5:"47aff1514de471d8937c1730944dca85"}],Ma=[{name:"ipa_xsampa.prism.bin",md5:"1f89f323b398e55b41a3d51292e153b4"},{name:"ipa_xsampa.reverse.bin",md5:"204c1a057beff33f33e4e6e2334d9388"},{name:"ipa_xsampa.schema.yaml",md5:"3de5dc8e1373f3445eb3eb6372757725"},{name:"ipa_xsampa.table.bin",md5:"2643f70120a14876bf358e77fae47def"},{name:"ipa_yunlong.prism.bin",md5:"e99012d354473ed9251fde4d664cf360"},{name:"ipa_yunlong.reverse.bin",md5:"bb4ede9eca7365defaa9631dacf2d0c6"},{name:"ipa_yunlong.schema.yaml",md5:"bca1844fbfc48f6141d419cb154cbc00"},{name:"ipa_yunlong.table.bin",md5:"ca7388b30a151620453ef1684408c34f"}],Da=[{name:"bopomofo.prism.bin",md5:"234e19133234e3c3b096aec7d4cebc25"},{name:"bopomofo.schema.yaml",md5:"2c657fdc0c9ac5894f3e4244949f2ef4"},{name:"bopomofo_express.prism.bin",md5:"166c04c549fe673e7b073b93c84832b0"},{name:"bopomofo_express.schema.yaml",md5:"d15617e84bc8cb6d001dba90c8bf5cfb"}],Ia=[{name:"cangjie5.prism.bin",md5:"270dae5bd46881ca495b8f96a3f405a8"},{name:"cangjie5.reverse.bin",md5:"1cec526731a457fbd930048a6bb3c4a5"},{name:"cangjie5.schema.yaml",md5:"fa91cc2e81a964b9a5099dcd1e234943"},{name:"cangjie5.table.bin",md5:"27532455e5194bc2da9a4eeecf3cb9d8"},{name:"cangjie5_express.prism.bin",md5:"332ba669b6f89ad261950859f8b9254c"},{name:"cangjie5_express.schema.yaml",md5:"8777c77fe530913bb23321a0534b66ec"}],Ba=[{name:"stroke.prism.bin",md5:"91b8ef81bd02d409057a18a0d62b2e3e"},{name:"stroke.reverse.bin",md5:"5eca5ef2a34f55c8589f34e7a3762a9d"},{name:"stroke.schema.yaml",md5:"44e4e9b9b7560c88374b6227816567d4"},{name:"stroke.table.bin",md5:"1ceec88e2abf0920c5e6d9ba32907dc0"}],qa=[{name:"array30.prism.bin",md5:"0e97da41ec8391c54d19f11071058393"},{name:"array30.reverse.bin",md5:"7f7d287012202461fc5ceb3f9eca2116"},{name:"array30.schema.yaml",md5:"7afec43f8ea020d44cbadc9bdefe2562"},{name:"array30.table.bin",md5:"e6dde610a837ae475807936ae77270d0"}],Ea=[{name:"wugniu.prism.bin",md5:"dbf5abf3515c2fba8a0af549ae9e6061"},{name:"wugniu.schema.yaml",md5:"ee539505db7b3e4503a3a0f4cae62617"},{name:"wugniu_lopha.prism.bin",md5:"f3f5258eafc62e9cd05d697a29dd0e77"},{name:"wugniu_lopha.reverse.bin",md5:"3cd2200a259a83b80fcb356682174ce1"},{name:"wugniu_lopha.schema.yaml",md5:"f548d1bc05160aca287f455e1c94d338"},{name:"wugniu_lopha.table.bin",md5:"89ebfd89994a67472b2378f488338a76"}],Sa=[{name:"soutzoe.prism.bin",md5:"4af9c71a9e69294ca4dab79a4eafcefa"},{name:"soutzoe.reverse.bin",md5:"db12cdab4004bf6efa49542152fb7cfe"},{name:"soutzoe.schema.yaml",md5:"40f575d07cf52d64c1a15c5a58f255a7"},{name:"soutzoe.table.bin",md5:"6239f14f75ec3cbb0d913b6947f8e8c0"}],Pa=[{name:"stenotype.prism.bin",md5:"1df2aa4b1d705d88004246ce33f9b0bb"},{name:"stenotype.schema.yaml",md5:"0a6f54723a56922d7c73aa8fb654ee05"}],La=[{name:"scj6.prism.bin",md5:"bd95bef1a1cd46f289c7750337072373"},{name:"scj6.reverse.bin",md5:"efb9d5051b2ce3e4d91a4a8dc4b63027"},{name:"scj6.schema.yaml",md5:"ec5610abdd580e2699f51aa9c36aa8bc"},{name:"scj6.table.bin",md5:"4216472d63de2550ee944ac5e97c557a"}],Aa=[{name:"quick5.prism.bin",md5:"3bde0fa40d486200ce17c45574575cca"},{name:"quick5.reverse.bin",md5:"27444b0d2825ee331e992058d419be34"},{name:"quick5.schema.yaml",md5:"d1fa5bb2d31c5e4130df680aee8c4d0c"},{name:"quick5.table.bin",md5:"25954fec90c31dedb99a45812c7447a9"}],Ca={"luna-pinyin":[{name:"luna_pinyin.prism.bin",md5:"353c5e34c859a9a0e76900df030fa713"},{name:"luna_pinyin.reverse.bin",md5:"d16701cc9cc16ab74f3b60b336409bf1"},{name:"luna_pinyin.schema.yaml",md5:"e9b840d9205f8425a98bd05122ba0fb9"},{name:"luna_pinyin.table.bin",md5:"153ea95bab6e4ee20abff0f5dfec6ead"},{name:"luna_pinyin_fluency.schema.yaml",md5:"2be9abb3c612c1479a7e2712b5b5cd39"},{name:"luna_quanpin.prism.bin",md5:"de0b1974ded4038dc2bea8e4c4e912d2"},{name:"luna_quanpin.schema.yaml",md5:"217dcb807feff1c3a11e664c05f8ac62"}],cantonese:xa,"double-pinyin":[{name:"double_pinyin.prism.bin",md5:"ebe88ee6e183f57f385b26f407508b2d"},{name:"double_pinyin.schema.yaml",md5:"37d4bbe21afc6ecbffef32035853a62f"},{name:"double_pinyin_abc.prism.bin",md5:"6a9b3f79d7c8b0caaf32aa649c02b65d"},{name:"double_pinyin_abc.schema.yaml",md5:"c19a099692bfff3d2292f31cae94f1f3"},{name:"double_pinyin_flypy.prism.bin",md5:"f9f5a25e674bcd94999947baa0ea7212"},{name:"double_pinyin_flypy.schema.yaml",md5:"20da2434e8413cfee9a16862b5de94e7"},{name:"double_pinyin_mspy.prism.bin",md5:"0d0e95e701e381b790d91bea3d9c26cd"},{name:"double_pinyin_mspy.schema.yaml",md5:"da893bb1ccb222953447bc03e28a7aa3"},{name:"double_pinyin_pyjj.prism.bin",md5:"869d45bd575161358073112c6e220dd6"},{name:"double_pinyin_pyjj.schema.yaml",md5:"fa420f3c963b79af67c8c52c27cbffc2"}],wubi:za,"pinyin-simp":[{name:"pinyin_simp.prism.bin",md5:"3b1037493ae93c1f7ae64bea9bc16650"},{name:"pinyin_simp.reverse.bin",md5:"a7691b570c4c4a1a8ca6339f9b6338e8"},{name:"pinyin_simp.schema.yaml",md5:"7101abebdd3155a77b545ed7a19b3681"},{name:"pinyin_simp.table.bin",md5:"18cdf4674c35c6694f96ab10df5ee7be"}],"terra-pinyin":[{name:"terra_pinyin.prism.bin",md5:"ab694f25ee6ee00f010de4d9a5df7245"},{name:"terra_pinyin.reverse.bin",md5:"c2b4ebbd44eb9a57aa1f6e263001e83c"},{name:"terra_pinyin.schema.yaml",md5:"e1d2aabdde916f7bb782d4e924b529c7"},{name:"terra_pinyin.table.bin",md5:"aac5fdf8846b9eac8dc031fd6f8f1bdf"}],ipa:Ma,bopomofo:Da,"combo-pinyin":[{name:"combo_pinyin.prism.bin",md5:"c6d468e4b7f88a824e32602624205ec1"},{name:"combo_pinyin.schema.yaml",md5:"1b0f5fc4b8270db662ce882b4ed96a2d"},{name:"combo_pinyin_10.schema.yaml",md5:"94fed0d8c33755f12ba9ec97cc41da35"},{name:"combo_pinyin_8.schema.yaml",md5:"ebd27fb7db368986561c54ad429dd56d"},{name:"combo_pinyin_9.schema.yaml",md5:"e5fc98fcf97bd2d2461d0e5969a8c535"}],"middle-chinese":[{name:"sampheng.prism.bin",md5:"edccb12d4111233c6c02cccd989c195b"},{name:"sampheng.schema.yaml",md5:"47d5a80503aac65038f641958672829b"},{name:"zyenpheng.prism.bin",md5:"7ad3323279ae37dbdaf2dd4b804b8618"},{name:"zyenpheng.reverse.bin",md5:"0d3b84ce7e7b2714cb4a0eea35536d38"},{name:"zyenpheng.schema.yaml",md5:"e7c18923cb4e305362f0b7ae48b2c329"},{name:"zyenpheng.table.bin",md5:"dc2e6122b5e0753e6c12887d21c38195"}],cangjie:Ia,stroke:Ba,array:qa,wugniu:Ea,soutzoe:Sa,stenotype:Pa,scj:La,quick:Aa};function Fa(n,e){return`ime/${n}/${e}`}const Oa=new R("ime");async function Ta(n){const e=[];function a(i){if(e.includes(i))return[];e.push(i);const p=[];for(const $ of ka[i]||[])p.push(...a($));const{dict:r,prism:s}=te[i],c=r||i,t=`${c}.table.bin`,m=`${c}.reverse.bin`,h=`${s||c}.prism.bin`,Ha=`${i}.schema.yaml`,D=Re[i];for(const $ of[t,m,h,Ha])for(const{name:I,md5:Ra}of Ca[D])if($===I){p.push({name:I,md5:Ra,target:D});break}return p}const o=a(n);await Promise.all(o.map(async({name:i,target:p,md5:r})=>{const s=`build/${i}`;try{Module.FS.lookupPath(s)}catch{const c=await Oa.get(i,r,Fa(p,i));Module.FS.writeFile(s,new Uint8Array(c))}}))}async function Va(n){M||await Ta(n),Module.ccall("set_ime","null",["string"],[n])}const Na=E("rime.js",{url:"",init(){Module.FS.chdir("rime"),Module.ccall("init","null",[],[]);for(const[n,e]of Object.entries(Mn))Module.ccall("set_schema_name","null",["string","string"],[n,e])}});let M=!1;const Wa=q("deployStatus");globalThis._deployStatus=(n,e)=>{n==="success"&&(M=!0),Wa(n,e)},B({fsOperate:S,setIME:Va,setOption(n,e){return Module.ccall("set_option","null",["string","number"],[n,e])},deploy(){return Module.ccall("deploy","null",[],[])},process(n){return Module.ccall("process","string",["string"],[n])}},Na)})();
